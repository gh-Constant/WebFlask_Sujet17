{% extends 'layout.html' %}

{% block title %}
    <title>Filtrer les tableaux</title>
{% endblock %}

{% block body %}
    <div class="container">
        <h2>Filtrer les tableaux</h2>
        
        <form method="post" action="/tableau/filtre">
            <!-- Filtre par nom -->
            <div>
                <label for="TableauNameFilter">Nom du tableau:</label><br>
                <input type="text" id="TableauNameFilter" name="TableauNameFilter" placeholder="Rechercher un tableau">
            </div>

            <!-- Filtre par type d'époque -->
            <div>
                <h3>Type d'époque:</h3>
                {% for type in typesEpoque %}
                    <div>
                        <input type="radio" name="typeEpoque_id" value="{{ type.id }}" id="type_{{ type.id }}">
                        <label for="type_{{ type.id }}">{{ type.libelle }}</label>
                    </div>
                {% endfor %}
            </div>

            <!-- Filtre par prix -->
            <div>
                <h3>Prix:</h3>
                <div>
                    <label for="prixMin">Prix minimum:</label>
                    <input type="number" id="prixMin" name="prixMin">
                </div>
                <div>
                    <label for="prixMax">Prix maximum:</label>
                    <input type="number" id="prixMax" name="prixMax">
                </div>
            </div>

            <button type="submit">Filtrer</button>
        </form>

        <!-- Affichage des résultats -->
        <div>
            <h3>Résultats:</h3>
            {% if tableaux %}
                {% for tableau in tableaux %}
                    <div>
                        <h4>{{ tableau.nomTableau }}</h4>
                        {% if tableau.photo %}
                            <img src="{{ url_for('static', filename='photos/' + tableau.photo) }}" alt="{{ tableau.nomTableau }}" style="width: 200px">
                        {% else %}
                            <img src="{{ url_for('static', filename='photos/no_photo.jpeg') }}" alt="Pas de photo" style="width: 200px">
                        {% endif %}
                        <p>Prix: {{ tableau.prixAssurance }} €</p>
                    </div>
                {% endfor %}
            {% else %}
                <p>Aucun tableau trouvé</p>
            {% endif %}
        </div>
    </div>
{% endblock %}